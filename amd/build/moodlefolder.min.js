define(["core/ajax","jquery"],function(a,b){var c={init:function(){b("#moodlefolder_button").off("click"),b(".block_moodlefolder_subscribe").on("click",c.subscribe),b(".block_moodlefolder_unsubscribe").on("click",c.unsubscribe)},subscribe:function(){console.log("called subscribe");var b=a.call([{methodname:"block_moodlefolder_subscribe",args:{courseid:c.getCourseId()}}]),d=Y.one("#moodlefolder_button"),e=M.util.add_spinner(Y,d);e.show(),b[0].done(function(a){c.switchSubscribeUnsubscribe(),e.hide()}).fail(function(a){console.error(a)})},unsubscribe:function(){var b=a.call([{methodname:"block_moodlefolder_unsubscribe",args:{courseid:c.getCourseId()}}]),d=Y.one("#moodlefolder_button"),e=M.util.add_spinner(Y,d);e.show(),b[0].done(function(a){c.switchSubscribeUnsubscribe(),e.hide()}).fail(function(a){console.error(a)})},switchSubscribeUnsubscribe:function(){var a;a=document.querySelector(".block_moodlefolder_subscribe")?"unsubscribe":"subscribe",console.log("Action: ",a);var d=b("#moodlefolder_button");d.html(a[0].toUpperCase()+a.slice(1)),d.removeClass(),d.off("click"),d.addClass("block_moodlefolder_"+a),d.on("click",c[a])},getCourseId:function(){for(var a=document.querySelector("body").classList,b=0;b<a.length;++b){var c=/course-(\d*)/g.exec(a[b]);if(c&&c[1])return parseInt(c[1])}}};return c});